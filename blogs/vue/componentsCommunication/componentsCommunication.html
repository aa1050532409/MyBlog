<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue组件通信 | Monster Charment的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="favicon.ico">
    <script language="javascript" type="text/javascript" src="/js/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/js/MouseClickEffect.js"></script>
    <meta name="description" content="vue组件通信总结">
    <meta name="author" content="Monster Charment">
    <meta name="keywords" content="Monster Charment的博客">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    
    <link rel="preload" href="/assets/css/0.styles.2d6c5f60.css" as="style"><link rel="preload" href="/assets/js/app.d473a08f.js" as="script"><link rel="preload" href="/assets/js/3.321e115f.js" as="script"><link rel="preload" href="/assets/js/1.3793bd4e.js" as="script"><link rel="preload" href="/assets/js/6.ef2c9ffd.js" as="script"><link rel="prefetch" href="/assets/js/10.f608e08b.js"><link rel="prefetch" href="/assets/js/11.b2a8e382.js"><link rel="prefetch" href="/assets/js/12.adb7fb4d.js"><link rel="prefetch" href="/assets/js/13.622f1d1b.js"><link rel="prefetch" href="/assets/js/14.0d89c7b9.js"><link rel="prefetch" href="/assets/js/15.e7b64f89.js"><link rel="prefetch" href="/assets/js/16.6dd3daa8.js"><link rel="prefetch" href="/assets/js/17.4e6ae48e.js"><link rel="prefetch" href="/assets/js/18.3ec1709b.js"><link rel="prefetch" href="/assets/js/19.7929939c.js"><link rel="prefetch" href="/assets/js/20.1af3b7a0.js"><link rel="prefetch" href="/assets/js/21.845f0a5f.js"><link rel="prefetch" href="/assets/js/22.0c995c00.js"><link rel="prefetch" href="/assets/js/4.8ca1f93b.js"><link rel="prefetch" href="/assets/js/5.10d9eea3.js"><link rel="prefetch" href="/assets/js/7.bcd258f1.js"><link rel="prefetch" href="/assets/js/8.cbf5691b.js"><link rel="prefetch" href="/assets/js/9.e7389c5e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2d6c5f60.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Monster Charment的博客</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>欢迎欢迎~~~</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Monster Charment</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/home/homegif.gif" alt="Monster Charment的博客" class="logo"> <span class="site-name">Monster Charment的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-menu"></i>
      项目
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  暂无~
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-tag"></i>
      工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/git/git.html" class="nav-link"><i class="undefined"></i>
  git的使用
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  github
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/about.html" class="nav-link"><i class="undefined"></i>
  关于我
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  关于博客
</a></li></ul></div></div><div class="nav-item"><a href="/message.html" class="nav-link"><i class="iconfont reco-message"></i>
  留言
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-github"></i>
      github
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/aa1050532409" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  我的github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    Monster Charment
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>9</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>6</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-menu"></i>
      项目
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  暂无~
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-tag"></i>
      工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/git/git.html" class="nav-link"><i class="undefined"></i>
  git的使用
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  github
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/about.html" class="nav-link"><i class="undefined"></i>
  关于我
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="undefined"></i>
  关于博客
</a></li></ul></div></div><div class="nav-item"><a href="/message.html" class="nav-link"><i class="iconfont reco-message"></i>
  留言
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-github"></i>
      github
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/aa1050532409" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  我的github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>vue组件通信</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Monster Charment</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">vue组件通信</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>Monster Charment</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>5/28/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>components</span></i></div></div> <div class="theme-reco-content content__default"><h3 id="前言"><a href="#前言" class="header-anchor">#</a> <strong>前言</strong></h3> <p>组件实例的作用域是相互独立，这让不同组件之间的数据无法相互引用。</p> <p>组件可以有几种关系:<br> <img src="/assets/img/1.a4c22e15.png" alt="avatar"></p> <p>从图中可知，可以有父子、兄弟、隔代关系，不同的关系需要选择有效的通信方式。<br>
一般有如 props/$emit或$on、vuex、$parent/$children、$attrs/$listeners和provide/inject</p> <h3 id="一-props-emit"><a href="#一-props-emit" class="header-anchor">#</a> <strong>一. props/$emit</strong></h3> <p><strong>父组件通过props向下传递数据给子组件</strong>，组件有三种数据形式: data、props、computed<br> <strong>子组件通过$emit传递自定义事件给父组件监听</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code>// Father.vue 父组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    // :user 这个user变量名是在子组件中props定义，&quot;user&quot;是父组件中定义
    // @sonDefineEvent 这个事件名是在子组件中的$emit中自定义的，父组件的函数faterListener不加()，
    // 则参数默认传入event
    // 如果faterListener加()，则需要手动传入$event才可获得event对象，faterListener($event)
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">:sonuser</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@sonDefineEvent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>faterListener<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Son</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">&quot;./components/son&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Father'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      user<span class="token operator">:</span> <span class="token string">&quot;father&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    Son<span class="token operator">:</span> Son
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">faterListener</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;从子组件的自定义事件传递过来的参数:&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span>  
      <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> msg  
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>// Son.vue 子组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  // 从父组件中接收而来的 user
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ sonuser }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">&quot;./components/son&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Son'</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 在子组件中定义接收的变量名</span>
    sonuser<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    Son<span class="token operator">:</span> Son
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">sonEmitEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 参数1-自定义事件名，参数2-传递的参数</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;sonDefineEvent&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;son&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="二-emit-on"><a href="#二-emit-on" class="header-anchor">#</a> <strong>二.$emit/$on</strong></h3> <p>这种方法通过一个空的Vue实例来作为事件总线，用它来触发事件和监听事件，
巧妙且轻量实现任何组件间的通信，包括父子、兄弟、跨级。</p> <p><strong>注意，$emit和$on的事件都必须用在同一个公共实例上。</strong></p> <p>假设有三个组件，要实现组件A、B、C之间的通信，A传给B，B传给C，C传给A</p> <p>首先，创建一个空的 Vue 实例 common 作为事件总线，在 main.js 中，绑定到 Vue 原型</p> <div class="language-vue extra-class"><pre class="language-vue"><code>Vue.prototype.$common = new Vue()
</code></pre></div><p>然后分别在组件A、B、C中注册相应的事件，在各自的组件中，<br> <strong>在methods中定义方法触发this.$common.$emit()传递自定义事件和数据</strong><br> <strong>在mounted中使用this.$common.$on()来监听事件和数据</strong><br>
例如组件A:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>A<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    A: {{ user }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sendA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>A TO B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;my-a&quot;</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        user<span class="token operator">:</span> <span class="token string">'A'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">sendA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// A 事件传递自定义事件给common</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$common<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'data-A'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 监听来自C的数据</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$common<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'data-C'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> msg
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>组件B:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>B<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    B: {{ user }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sendB<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>B TO C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;my-b&quot;</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        user<span class="token operator">:</span> <span class="token string">'B'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">sendB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// B 事件传递自定义事件给common</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$common<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'data-B'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 监听来自 A 的数据</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$common<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'data-A'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> msg
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>组件C:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>C<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    C: {{ user }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sendC<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>C TO A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;my-c&quot;</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        user<span class="token operator">:</span> <span class="token string">'C'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">sendC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// C 事件传递自定义事件给common</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$common<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'data-C'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 监听来自 B 的数据</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$common<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'data-B'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> msg
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>效果: 分别实现A TO B，C TO A
<img src="data:image/png;base64,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" alt="avatar"><img src="data:image/png;base64,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" alt="avatar"><img src="data:image/png;base64,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" alt="avatar"></p> <h3 id="三-vuex"><a href="#三-vuex" class="header-anchor">#</a> <strong>三.vuex</strong></h3> <p>vuex是一个状态管理模式，集中式管理应用的所有组件状态，并以相应
规则保证状态以一种可预测方式变化。<br> <img src="/assets/img/5.85c16bdd.png" alt="avator"></p> <p>通过这图片，我们只需要明确这个 Store 的几点:<br>
1.状态(变量) 都保存在 State 中<br>
2.异步方法保存在 Actions 中<br>
3.同步方法保存在 Mutations 中<br>
4.要改变 State 中的状态，使用 Store.commit() 来触发 Mutations 中的方法<br>
5.要使用异步操作，使用 Store.dispatch() 来触发 Actions 中的方法<br>
6.getter 是 Store 的计算属性<br>
7.组件要获取 Store 中的状态，使用计算属性 computed</p> <p>下面通过 + - 显示数字，两种方式来对比显示 vuex 的不同:
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAAAxCAIAAABBH4A+AAAC0ElEQVRoBe2Zv2/TQBTHL6j/QBbkolSRJ7J0iVSpQWJhYAanHXAlpAqxhI3CQgIDSllQ2cjCgISUMLQxzFTqUokgVfLCEiYrkkUtlv4J5p1s92eqfs+c28S8Wxyfv/fuvU++1t3JhTAMBTeAwDVAwxJJgEmhPmBSTAolgOrYU0wKJYDq2FNMCiWA6thTKKkZVJhKFwSB4zij0SjV6DGDyuWyZVn0QEvYKJphGGNmOtNVyPQ00+l0KpVKtVo9M2/KDtd1h8MhDdYSNorWaDSQbLJ9+8hNGjFRPRSNYuoKG0VDMJEmW1JgElMhUyfl9+qFw1bv+VNRpoYk1UgFn+uFuRXnaF5nZa6w/uPoPse/VEj5vSe2pNQe0DIg235PLkOt2vogx4SS0hRIBbt94mT19puL8WjjwfvusmS18x/YCicV7HyRoOq3j+8+DPtpW6Lazr+rcFKet0lMqmYpNlR8KZnyDfzpBSe7Fe/+bK0Wi2/3FEddqhwm5XsuJbZsmpea3gRNBpM6L+eSqW0Dft4Uk9H/z6Qir6Ur5vfWw2LUbj7+KsSbu/FdcWMC30OYVOSdTc9LB2XsqBtLnw6i9uvDPSFefIvvDtYWxuqvtBMmJUxTbghc79Sm3Pfkinj/zvEV8Uorosn3NhJzyqumhQInZZjzlITT3z2xyg22W9RbNScJlFhYS8wpr8/1GBQnJWqrXdoQOPbs4fGFDje3XtGC2H2U7EXTuun60kdtJaXN4YJxCqREyX72WoZr1eIT8qw83Fjdd/ZEOeqCitM+ViElRO1lGA7kpjxp7e9h3z61F02e5ew6o1zPYjMMm8qjpn+Amqemv970FTAplB2TYlIoAVTHnmJSKAFUl62n6CMtfX1EcwF0FI1i6gobRQOmlZJsvyHz13bwb8iVLNu3L0+omBT6bzIpJoUSQHXsKSaFEkB17CkmhRJAdewpJoUSQHV/AY1v3ifUN2kpAAAAAElFTkSuQmCC" alt="avatar"></p> <p>1.不使用 vuex</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{count}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dec<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span><span class="token string">'Count'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">inc</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">,</span>
    <span class="token function-variable function">dec</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以看到，要改变 count 数值，得通过 methods 中的 inc、dec 方法，但 count 和 inc、dec
仅仅是 Count 这个组件中的局部变量和方法。<br>
如果其他组件想要使用 inc、dec 方法来改变 count 的数值，这将会变得麻烦，通过上面介绍的两种方法，当然
是可以实现的，如果项目小，状态不复杂，你甚至可以只用 $emit/$on 来实现。</p> <p>但是，当项目变得庞大，组件数量变多，需要共享的状态变得很多时，上述两种方法就比较难以维护。</p> <p>2.使用 vuex<br>
首先，项目根目录下，创建一个 store 目录，然后创建一个 index.js 文件</p> <p>在这个目录的文件中放入 Store 的代码。</p> <div class="language-vue extra-class"><pre class="language-vue"><code>import Vue from &quot;vue&quot;
import Vuex from &quot;vuex&quot;

Vue.use(Vuex)

export default new Vuex.Store({
  state: {
    count: 0
  },
  mutations: {
    inc: state =&gt; state.count++,
    dec: state =&gt; state.count--
  }
})
</code></pre></div><p>可以看到，count 变量保存在 state 中，inc、dec 两个同步方法放在 mutations 中<br>
这样，任何一个其他组件，都可以通过 vuex 的 store 来访问变量和方法，类似于全局变量和方法。</p> <p>下面在 Count 组件中来访问 count 变量，并通过 mutations 的 inc、dec 来修改 count 的状态</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{ count }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dec<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store&quot;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Count&quot;</span><span class="token punctuation">,</span>
    computed<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">inc</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'inc'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function-variable function">dec</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'dec'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>与 Store 相关的代码，即 状态 和 行为都放在 store 目录下，这样就可以方便管理。</p> <h3 id="四-attrs-listeners"><a href="#四-attrs-listeners" class="header-anchor">#</a> <strong>四.$attrs/$listeners</strong></h3> <p>多级组件嵌套，传递数据可以使用 vuex。但如果仅是传递数据，没有中间处理，
使用 vuex 处理就不太合适。当然使用 $emit/$on 也是可以做到的，但是体现
不出嵌套关系。</p> <p>为此 $attrs/$listener 可以专门来解决这个问题。</p> <p>先来简单理解 $attrs 的作用: <strong>子组件继承来自父组件传入的属性，除了props中声明的，</strong><br>
如果不希望组件根元素继承特性，可以在组件选项中设置 inheritAttrs: false，这个待会再解析。</p> <p><strong>先来看看 $attrs 的用法:</strong></p> <p>祖父组件: 向父组件传递了 user1 和 age 属性</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grandFather<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>father</span> <span class="token attr-name">:user1</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>father</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> father <span class="token keyword">from</span> <span class="token string">&quot;./father&quot;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;grandFather&quot;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
      father<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        user1<span class="token operator">:</span> <span class="token string">&quot;grandFather&quot;</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>父组件: 可通过 $attrs 获得祖父组件传递的所有属性</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>father<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;father&quot;</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        user2<span class="token operator">:</span> <span class="token string">&quot;father&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在 created 中输出 $attrs 的值，可看到<br> <img src="data:image/png;base64,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" alt="avatar"></p> <p>那么，在父组件中加上 props 来看看输出结果</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>father<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;father&quot;</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span>
      user1<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> String
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        user2<span class="token operator">:</span> <span class="token string">&quot;father&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="avatar"><br>
可以看到，在props中定义了 user1 属性，那么 $attrs 中就没有了这个属性。</p> <p>我们再来看看 inheritAttrs 的作用: 未加 props</p> <p>inheritAttrs: true<br> <img src="data:image/png;base64,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" alt="avatar"></p> <p>inheritAttrs: false<br> <img src="data:image/png;base64,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" alt="avatar"></p> <p>是不是很清晰，inheritAttrs: false 时，组件的顶层标签元素中，不会渲染父组件传递过来的属性。<br>
但不管 为 true 还是 false，$attrs 都能获取传递过来的属性。</p> <p>但 $attrs 是为了解决跨代传递数据才被提出来的，那么 祖父 传 子 如何实现?<br>
非常简单，就像 祖父 传递 数据给 父， 父只要把从祖父继承而来的 $attrs 传递给 子不就实现了!</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>father<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>子组件:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>son<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ $attrs }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;son&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以看到 子组件的 $attrs 继承了祖父组件的数据 (未加props):<br> <img src="data:image/png;base64,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" alt="avatar"></p> <p>所以总结下来就是，父组件的 $attrs 作为中间桥梁，继承来自祖父组件的数据，
然后父组件再将 $attrs 传递给子组件就行了!</p> <p>到此，我们已经知晓了祖父是如何传递数据给子组件，但这依然是单向数据流，子组件要如何改变
祖父组件传递而来的数据? 这就需要用到 $listeners</p> <p><strong>$listeners的作用:</strong>
概念: 它包含了父作用域中的 v-on 事件监听器。$listeners 跟 $attrs 一模一样，只不过 v-bind: 属性
变成了 v-on: 事件。然后传递从 v-bind=&quot;$attrs&quot; 变成了 $listeners</p> <p>所以用法也是 祖父 绑定自定义事件传给 父组件标签，这样 父组件 就能在 $listener 获得了传递过来的祖父事件，然后再传给
子组件，子组件就可以使用到祖父的事件来修改传递的属性。</p> <p>祖父组件：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grandFather<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>father</span> <span class="token attr-name">:user1</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@changeUser1</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeUser1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@changeAge</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>father</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> father <span class="token keyword">from</span> <span class="token string">&quot;./father&quot;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;grandFather&quot;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
      father<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        user1<span class="token operator">:</span> <span class="token string">&quot;grandFather&quot;</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">changeUser1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>user1 <span class="token operator">=</span> <span class="token string">&quot;haveBeenChanged&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">50</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>父组件:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>father<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$listeners<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> son <span class="token keyword">from</span> <span class="token string">&quot;./son&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;father&quot;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
      son<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    inheritAttrs<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        user2<span class="token operator">:</span> <span class="token string">&quot;father&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$listeners<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>子组件:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>son<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ $attrs }} -- {{ $listeners }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;son&quot;</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="五-provide-inject"><a href="#五-provide-inject" class="header-anchor">#</a> <strong>五.provide/inject</strong></h3> <p>这一对是vue实例中的选项，允许一个祖先组件向其所有子孙后代注入一个依赖，
无论组件层次有多深，并在其上下关系成立时间里始终有效。</p> <p><strong>简而言之: 祖先组件通过 provide 提供变量，子孙组件通过 inject 来注入变量。</strong></p> <p>provide / inject 主要解决了跨级组件间的通信问题，不过它的使用场景，主要是子组件获取上级组件的状态，
跨级组件间建立了一种主动提供与依赖注入的关系。</p> <p>来看下例子，还是三个组件:</p> <div class="language-vue extra-class"><pre class="language-vue"><code>// 祖父组件 通过 provide 提供 sendToAll 变量
export default {
    name: &quot;grandFather&quot;,
    components: {
      father,
    },
    provide() {
      return() {
        sendToAll: 'grandFather To All'
      }
    }
  }
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>// 父组件 使用 inject 注入 sendToAll 变量
export default {
    name: &quot;father&quot;,
    components: {
      son,
    },
    inject: ['sendToAll'],
    mounted() {
      console.log(this.sendToAll);
    }
  }
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>// 子组件 也一样
export default {
    name: &quot;son&quot;,
    inject: ['sendToAll'],
    mounted() {
      console.log(this.sendToAll);
    }
  }
</code></pre></div><p>但值得注意的是，<strong>provide 和 inject 绑定不是可响应的。这是刻意而为之。
如果你传入的是一个可监听对象，那么其对象的属性才是可响应的。</strong></p> <p><strong>provide/inject实现数据响应式</strong><br>
有两种方法:<br>
1.使用 provide 提供祖父组件实例，这样子组件拿到实例可修改祖先的实例属性，但是这种方式还带有很多不必要的属性
如props、methods</p> <div class="language-vue extra-class"><pre class="language-vue"><code>// 祖父组件
provide(){
  theme: this
}
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>// 子组件 使用 theme 就可以访问祖父组件的 属性和事件了
inject: ['theme']
</code></pre></div><p>2.使用 Vue.observable 优化响应式 provide</p> <div class="language-vue extra-class"><pre class="language-vue"><code>// 祖父组件
provide(){
  this.theme = Vue.observable({
    color: &quot;blue&quot; // 传递的数据
  })
  return {
    theme: this.theme
  }
}
</code></pre></div><h3 id="六-parent-children与ref"><a href="#六-parent-children与ref" class="header-anchor">#</a> <strong>六.$parent/$children与ref</strong></h3> <p>ref: 如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；
如果用在子组件上，引用就指向组件实例<br>
$parent/$children: 直接访问 父/子 实例</p> <p>这两种方法都是直接得到组件实例，使用后可直接调用组件的方法或
访问数据。</p> <p>使用 ref 访问组件实例: 在要访问的子组件上使用 ref=&quot;XX&quot; 属性，然后父组件内 使用this.$ref.XX</p> <div class="language-vue extra-class"><pre class="language-vue"><code>// component-a 子组件
export default {
  data () {
    return {
      title: 'Vue.js'
    }
  },
  methods: {
    sayHello () {
      window.alert('Hello');
    }
  }
}
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>// 父组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-a</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> comA <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>comA<span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>comA<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Vue.js</span>
      comA<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 弹窗</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>需要注意的是，<strong>这两种方法的弊端是，无法跨级或兄弟间通信。</strong></p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> <strong>总结</strong></h3> <p>根据使用场景可以分为三类:<br>
1.父子通信: props/$emit，$parent/$children, ref, provide/inject,
$attrs/$listeners<br>
2.兄弟通信: vuex, $emit/$on<br>
3.跨级通信: vuex, $emit/$on, provide/inject, $attrs/$listeners</p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-70334359></ul></main> <!----></div></div></div></div><div class="global-ui"><!----><!----><div></div><div class="Sakura" data-v-017cf06a><canvas id="canvas_sakura" style="z-index:-1;" data-v-017cf06a></canvas></div><APlayer audio="" fixed="true" mini="true" autoplay="autoplay" theme="#f9bcdd" loop="loop" order="list" preload="auto" volume="0.1" mutex="true" lrc-type="0" list-folded="true" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><!----></div></div>
    <script src="/assets/js/app.d473a08f.js" defer></script><script src="/assets/js/3.321e115f.js" defer></script><script src="/assets/js/1.3793bd4e.js" defer></script><script src="/assets/js/6.ef2c9ffd.js" defer></script>
  </body>
</html>
